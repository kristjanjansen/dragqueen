<!DOCTYPE html>
<html>
<head>
    <title></title>
    <style>

        .draggable {
            width: 200px;
            height: 50px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background-color: blue;
        }

        .draggable2 {
            width: 200px;
            height: 50px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background-color: blue;
        }
    </style>
</head>
<body>

    <div class="draggable" id="d1">draggable1</div>
    <div class="draggable" id="d2">draggable2</div>

    <div class="message-box"></div>
    <input type="text" name="message">
    <button class="submit-btn">Submit</button>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.3/jquery.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/draggabilly/2.1.0/draggabilly.pkgd.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script>

        var socket = io.connect();

        var draggables = $('.draggable');
        var draggies = []

        draggables.each(function() {
            draggable = $(this).draggabilly().on('dragMove', function() {
                var draggie = $(this).data('draggabilly');
                console.log($(this).attr('id'), draggie.position.x, draggie.position.y );
                id = $(this).attr('id')
                socket.emit('move', {
                    id: id, x: draggie.position.x, y: draggie.position.y
                });

            })
        })

        socket.on('move', function (data) {

            $('#' + data.id).css({'left': data.x, 'top': data.y})
        });
/*
        draggables.each(function() {
            draggable = $(this).draggabilly()
            draggie = draggable.data('draggabilly');
            draggies.push(draggie)
        })

        console.log(draggies)

        draggable.on('dragMove', function() {
            console.log('d1', draggies[0].position)
            console.log('d2', draggies[1].position)
        });
*/



       /*
        var draggie = draggable.data('draggabilly');

        draggable.on('dragMove', function() {
            console.log(draggie.position)
        });

        draggable2.on('dragMove2', function() {
            console.log(draggie2.position)
        });
*/

    </script>

</body>
</html>

